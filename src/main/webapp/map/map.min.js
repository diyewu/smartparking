!
function(t) {
    function e(n) {
        if (i[n]) return i[n].exports;
        var o = i[n] = {
            i: n,
            l: !1,
            exports: {}
        };
        return t[n].call(o.exports, o, o.exports, e),
        o.l = !0,
        o.exports
    }
    var i = {};
    e.m = t,
    e.c = i,
    e.i = function(t) {
        return t
    },
    e.d = function(t, i, n) {
        e.o(t, i) || Object.defineProperty(t, i, {
            configurable: !1,
            enumerable: !0,
            get: n
        })
    },
    e.n = function(t) {
        var i = t && t.__esModule ?
        function() {
            return t.
        default
        }:
        function() {
            return t
        };
        return e.d(i, "a", i),
        i
    },
    e.o = function(t, e) {
        return Object.prototype.hasOwnProperty.call(t, e)
    },
    e.p = "",
    e(e.s = 180)
} ({
    180 : function(t, e, i) {
        "use strict";
        function n(t) {
            var e, i = new RegExp("(^| )" + t + "=([^;]*)(;|$)");
            return (e = document.cookie.match(i)) ? unescape(e[2]) : null
        }
        function o() {
            var t = O.getBounds();
            return {
                ne_point: t.getNorthEast().lng + "," + t.getNorthEast().lat,
                sw_point: t.getSouthWest().lng + "," + t.getSouthWest().lat
            }
        }
        function a(t, e, i) {
            if (O.clearOverlays(), J.show) {
                var n = P.a.filter.$children[0].params.consMetros;
                return void(J.text.indexOf("在建") > -1 ? (r(O, n[J.value], "metro" === i || "init" === i), $.each(j,
                function(t, e) {
                    _(e)
                })) : (w(Q.city + J.text), W.setPolylinesSetCallback(function() {
                    $.each(j,
                    function(t, e) {
                        _(e)
                    })
                })))
            }
            var o = [];
            if (t) {
                if ($.each(j,
                function(t, e) {
                    o.push(y(e).getPosition())
                }), o.length) {
                    q = !1;
                    var a = O.getViewport(o.slice(0, 20), {
                        margins: [20, 20, 20, 20],
                        zoomFactor: 0
                    });
                    O.setViewport(a)
                }
            } else {
                var s = x();
                if (1 == s ? $.each(M,
                function(t, e) {
                    b(e);
                    var i = new BMap.Polygon(e.positionBorder, {
                        strokeWeight: 3,
                        strokeOpacity: 1,
                        strokeColor: "rgba(255,102,48,1)",
                        fillOpacity: 0,
                        fillColor: ""
                    });
                    i.hide(),
                    N[e.id] = i,
                    O.addOverlay(i)
                }) : 2 == s ? $.each(j,
                function(t, e) {
                    _(e).getPosition()
                }) : 3 == s && $.each(j,
                function(t, e) {
                    y(e).getPosition()
                }), e) {
                    var c = V.bizcircle || V.district;
                    if (!c) return;
                    var l = new BMap.Point(H[c].pointLng, H[c].pointLat);
                    q = !1,
                    O.centerAndZoom(l, 14),
                    K = !1
                }
                $(".list-container").width() && (X.selectedBlock = null)
            }
        }
        function r(t, e, i) {
            var n = e.map(function(t) {
                return new BMap.Point(t.pointLng, t.pointLat)
            }); !
            function(t, e, i) {
                var n = new BMap.Polyline(e, {
                    strokeColor: "#0030ff",
                    strokeWeight: 6,
                    strokeOpacity: .45
                });
                t.addOverlay(n),
                i && t.setViewport(e, {
                    zoomFactor: 0
                })
            } (t, n, i),
            function(t, e) {
                var i = new BMap.Icon("http://api0.map.bdimg.com/images/stop_icon.png", new BMap.Size(11, 11), {
                    offset: new BMap.Size( - 5, -5)
                });
                e.forEach(function(e) {
                    var n = new BMap.Marker(new BMap.Point(e.pointLng, e.pointLat), {
                        icon: i
                    });
                    t.addOverlay(n),
                    n.addEventListener("mouseover",
                    function() {
                        X.metroLabel || ($(".metro-station").hide(), $(".metro-station[title='" + e.metroName + "'").show())
                    }),
                    n.addEventListener("mouseout",
                    function() {
                        X.metroLabel || $(".metro-station").hide()
                    })
                }),
                e.forEach(function(e) {
                    s(t, new BMap.Point(e.pointLng, e.pointLat), e.metroName)
                }),
                X.metroLabel ? $(".metro-station").show() : $(".metro-station").hide()
            } (t, e)
        }
        function s(t, e, i) {
            var n = new c(e, $('<div class="metro-station" title="' + i + '"><p>' + i + "</p></div>"));
            t.addOverlay(n)
        }
        function c(t, e) {
            this._center = t,
            this._dom = e
        }
        function l(t) {
            var e = $.extend(!0, {},
            t);
            "init" == t.operation && $.extend(V, t),
            x() > 1 && $.extend(V, o()),
            delete V.newblock_id;
            var t = m(t);
            t && t.operation && "metro" == t.operation && t.metro && (q = !1, W.setLocation(Q.city), W.enableAutoViewport(), V = u(V), V = p(V)),
            t && t.metro && (V = p(V)),
            t && t.operation && "search" == t.operation && (t.discount = "", X.discount = t.discount),
            delete t.operation,
            t && t.search && (V = u(V), V = p(V)),
            t && t.search && "object" == B(t.search) && "block" == t.search.type ? (t.newblock_id = t.search.vid.replace(/[^0-9]+/g, ""), delete t.search, delete V.search) : t && t.search && "object" == B(t.search) && t.search.type && (t.search = t.search.nameShow),
            K = !1,
            V.district,
            d(V.district) == d(t.district) && d(V.bizcircle) == d(t.bizcircle) || (K = !0),
            1 == x() ? (t.isPage ? (Z = !0, $.extend(t, {
                limit_offset: t.limit_offset || 0,
                limit_count: 20
            })) : U = 0, t.isPage || t.sort || t.search || h($.extend(V, t))) : ($(".no-more-words").show(), $(".loading-words").hide(), delete V.limit_offset, delete V.limit_count),
            t.isPage || (X.mapLoading = !0),
            D && (t.district = D),
            $.ajax({
                type: "GET",
                url: "/loupan/ajax/ditu/newblock",
                data: $.extend(v(V, t), t),
                success: function(i) {
                    D && (D = "", V.district = ""),
                    t.isPage ? (j = j.concat(i.dataList), U++, Z = !1) : j = i.dataList,
                    V.limit_count && i.dataList.length < V.limit_count ? ($(".no-more-words").show(), $(".loading-words").hide(), R = !0) : R = !1,
                    delete V.isPage,
                    delete V.sort,
                    (V.search || V.newblock_id) && (q = !1, setTimeout(function() {
                        q = !0
                    },
                    300)),
                    X.data = i,
                    X.data.dataList = j,
                    X.selectedBlock = null;
                    var n = !1; (V.search || V.newblock_id) && (n = !0),
                    a(n, K, e.operation),
                    X.mapLoading = !1
                },
                dataType: "json",
                contentType: "application/json"
            })
        }
        function d(t) {
            return t || (t = ""),
            t
        }
        function h(t) {
            var e = {};
            $.extend(e, V),
            delete e.limit_count,
            e = u(e),
            $.getJSON("/loupan/ajax/ditu/district", e,
            function(t) {
                M = t.dataList,
                a()
            })
        }
        function u(t) {
            for (var e in t) t.hasOwnProperty(e) && ("ne_point" != e && "sw_point" != e || delete t[e]);
            return t
        }
        function p(t) {
            for (var e in t) t.hasOwnProperty(e) && ("limit_offset" != e && "limit_count" != e || delete t[e]);
            return t
        }
        function m(t) {
            t && !t.metro && (J.show = !1, X.metro = !1),
            (t.search || t.newblock_id) && (delete t.ne_point, delete t.sw_point),
            t.fromUrl && (X.params = [{
                text: t.search,
                key: "search"
            }], delete t.fromUrl);
            var e = !0;
            for (var i in t) t.hasOwnProperty(i) && "operation" != i && t[i] && t[i].length && (e = !1);
            if (e && 1 == x() && (t.limit_offset = 0, t.limit_count = 20), t && t.__ob__ || "init" == t.operation) {
                "init" == t.operation && (delete t.operation, delete V.operation);
                var n = {};
                return F = [],
                J.show = !1,
                X.metro = !1,
                t.metro && (J.show = !0, X.metro = !0, J.text = t.metro.text, J.value = t.metro.value, J.operation = t.metro.key),
                $.each(Q.filters,
                function(e, i) {
                    t[i] ? (n[i] = t[i].value, F.push({
                        text: t[i].text,
                        key: t[i].key,
                        value: t[i].value
                    })) : n[i] = ""
                }),
                Q.multiFilters.map(function(e) {
                    var i = "";
                    t[e] && f(t[e]) && t[e].map(function(t) {
                        i += "" == i ? t.value: "," + t.value,
                        F.push({
                            text: t.text,
                            key: t.key,
                            value: t.value
                        })
                    }),
                    t[e] && t[e].length ? n[e] = i: n[e] = ""
                }),
                n.operation = t.operation,
                X.params = F,
                n
            }
            return t
        }
        function f(t) {
            return "[object Array]" === toString.apply(t)
        }
        function v(t, e) {
            for (var i in e) e.hasOwnProperty(i) && Q.sortParams.indexOf(i) > -1 && $.each(Q.sortParams,
            function(e, n) {
                t.hasOwnProperty(n) && n != i && delete t[n]
            });
            return t
        }
        function g(t) {
            var e = "价格暂定";
            return e = "别墅" == t.villaName ? t.totalPriceMin ? t.totalPriceMin + "万/套起": "总价待定": t.avgPrice ? t.avgPrice + "元/m²": "均价待定",
            "售完" == t.saleStatus || "已售完" == t.saleStatus || "售罄" == t.saleStatus ? "已售完": e
        }
        function w(t) {
            W.getBusList(t)
        }
        function b(t) {
            var e = {
                html: "",
                anchor: ""
            };
            H[t.fullSpellName] || (H[t.fullSpellName] = {},
            H[t.fullSpellName].pointLng = t.centerPoint.pointLng, H[t.fullSpellName].pointLat = t.centerPoint.pointLat);
            var i = new BMap.Point(H[t.fullSpellName].pointLng, H[t.fullSpellName].pointLat),
            n = "均价待定";
            t.avgPrice && (n = (t.avgPrice / 1e4).toFixed(1) + "万元/㎡"),
            e.html = '<div data-id="' + t.id + '" data-dianji="level1" data-name="' + t.fullSpellName + '" data-point-lng="' + t.centerPoint.pointLng + '" data-point-lat="' + t.centerPoint.pointLat + '" class="level1_label js_innerWrap"><p>' + t.name + "<br/>" + n + '</p><p class="saleTotal">' + t.blockCount + "个楼盘</p></div>",
            e.anchor = new BMap.Size( - 30, -25);
            var o = new BMapLib.RichMarker(e.html, i, {
                anchor: e.anchor,
                background: "transparent"
            });
            return E[t.id] = o,
            O.addOverlay(o),
            o.addEventListener("onclick",
            function(e) {
                A[t.id] = !0,
                this.setContent($(this.getContent()).show().addClass("label-clicked").prop("outerHTML")),
                q = !1,
                O.setCenter(i),
                O.setZoom(14),
                D = t.fullSpellName,
                $(".search-input").blur();
                var n = $(this.getContent()).data("dianji");
                window.ga("send", "event", "button", "click", n)
            }),
            o.addEventListener("onmouseover",
            function(e) {
                N[t.id].show(),
                $(N[t.id]).css("z-index", 0),
                $(this._container).css("z-index", 0)
            }),
            o.addEventListener("onmouseout",
            function(e) {
                N[t.id].hide(),
                $(this._container).css("z-index", $(this._container).attr("zindex")),
                $(N[t.id]._container).css("z-index", $(this._container).attr("zindex"))
            }),
            $(o._container).css("background", "transparent").attr("zindex", $(o._container).css("zIndex")),
            A[t.id] && o.setContent($(o.getContent()).addClass("label-clicked").prop("outerHTML")),
            o
        }
        function _(t) {
            var e = {
                html: "",
                anchor: ""
            },
            i = new BMap.Point(t.centerPoint.pointLng, t.centerPoint.pointLat);
            e.html = '<div style="display: none" data-id="' + t.id + '" data-dianji="level2" class="level2_label js_innerWrap">' + g(t) + "<span></span><div>" + t.nameShow + "</div></div>",
            e.anchor = new BMap.Size( - 50, -26);
            var n = new BMapLib.RichMarker(e.html, i, {
                anchor: e.anchor,
                background: "transparent"
            });
            return O.addOverlay(n),
            setTimeout(function() {
                var e = $(".level2_label[data-id='" + t.id + "']");
                e && e.innerWidth() && n.setAnchor(new BMap.Size( - e.innerWidth() / 2, -e.innerHeight())),
                e.show()
            },
            60),
            n.addEventListener("onclick",
            function(e) {
                I[t.id] = !0,
                X.selectedBlock = t,
                $(".level2_label").removeClass("hover"),
                this.setContent($(this.getContent()).show().addClass("label-clicked").addClass("hover").prop("outerHTML")),
                $(this._container).css("z-index", 0);
                var i = $(".level2_label[data-id=" + et + "]").parent();
                i.css("z-index", i.attr("zindex")),
                et = t.id,
                $(".list-container").width() || $(".collaped-list .expander").click(),
                $(".search-input").blur();
                var n = $(this.getContent()).data("dianji");
                window.ga("send", "event", "button", "click", n)
            }),
            n.addEventListener("onmouseover",
            function(t) {
                $(this._container).css("z-index", 0)
            }),
            n.addEventListener("onmouseout",
            function(e) {
                et !== t.id && $(this._container).css("z-index", $(this._container).attr("zindex"))
            }),
            $(n._container).css("background", "transparent").attr("zindex", $(n._container).css("zIndex")),
            I[t.id] && n.setContent($(n.getContent()).addClass("label-clicked").prop("outerHTML")),
            n
        }
        function y(t) {
            var e = {
                html: "",
                anchor: ""
            },
            i = new BMap.Point(t.centerPoint.pointLng, t.centerPoint.pointLat);
            e.html = '<div style="display: none" data-id="' + t.id + '" data-dianji="level3" class="level3_label js_innerWrap">' + g(t) + "<br/>" + t.nameShow + "<span></span></div>",
            e.anchor = new BMap.Size( - 54, -46);
            var n = new BMapLib.RichMarker(e.html, i, {
                anchor: e.anchor,
                background: "transparent"
            });
            return O.addOverlay(n),
            setTimeout(function() {
                var e = $(".level3_label[data-id='" + t.id + "']");
                e && e.innerWidth() && n.setAnchor(new BMap.Size( - e.innerWidth() / 2, -e.innerHeight())),
                e.show()
            },
            60),
            n.addEventListener("onclick",
            function(e) {
                I[t.id] = !0,
                X.selectedBlock = t,
                $(".level3_label").removeClass("hover"),
                this.setContent($(this.getContent()).show().addClass("label-clicked").addClass("hover").prop("outerHTML"));
                var i = $(".level3_label[data-id=" + et + "]").parent();
                i.css("z-index", i.attr("zindex")),
                et = t.id,
                $(".list-container").width() || $(".collaped-list .expander").click(),
                $(".search-input").blur();
                var n = $(this.getContent()).data("dianji");
                window.ga("send", "event", "button", "click", n)
            }),
            n.addEventListener("onmouseover",
            function(t) {
                $(this._container).css("z-index", 0)
            }),
            n.addEventListener("onmouseout",
            function(e) {
                et !== t.id && $(this._container).css("z-index", $(this._container).attr("zindex"))
            }),
            $(n._container).css("background", "transparent").attr("zindex", $(n._container).css("zIndex")),
            I[t.id] && n.setContent($(n.getContent()).addClass("label-clicked").prop("outerHTML")),
            n
        }
        function x() {
            var t = O.getZoom(),
            e = "1";
            return - 1 != Q.zoomLevel2.indexOf(t) ? e = "2": -1 != Q.zoomLevel3.indexOf(t) && (e = "3"),
            e
        }
        function k() {
            O.addControl(Y),
            O.addControl(tt)
        }
        function L() {
            var t = $(".list-item").last().innerHeight(),
            e = $(".loading-words").height(),
            i = $(".list-header").innerHeight();
            $(".item-wrap").scrollTop() > 0 ? $(".list-header").css("box-shadow", "0 1px 3px rgba(0, 0, 0, .25)") : $(".list-header").css("box-shadow", "none"),
            1 != x() || V.metro || V.search || R || ($(".no-more-words").hide(), $(".loading-words").show(), !Z && $(".item-wrap").scrollTop() > t * ($(".list-item").length - 1) - $(".list-container").height() + e + i - 2 && l({
                isPage: !0,
                limit_offset: (U + 1) * (V.limit_count || 0)
            }))
        }
        function C(t) {
            var e = new RegExp("(^|&)" + t + "=([^&]*)(&|$)"),
            i = window.location.search.substr(1).match(e);
            return null != i ? unescape(i[2]) : null
        }
        function z() {
            $(".map-conditions").css("margin-top", 72 + $(".center-container").height() + "px")
        }
        Object.defineProperty(e, "__esModule", {
            value: !0
        });
        var P = i(83),
        B = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ?
        function(t) {
            return typeof t
        }: function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol": typeof t
        },
        O = new BMap.Map("map-container", {
            minZoom: 10,
            maxZoom: 18,
            enableMapClick: !1
        });
        O.centerAndZoom(new BMap.Point(headerParameters.cityCoordinate.longitude, headerParameters.cityCoordinate.latitude), 12),
        O.enableScrollWheelZoom();
        var S = !0;
        P.a.initCallback(l);
        var M = {},
        j = [],
        T = {},
        N = {},
        E = {},
        A = {},
        I = {},
        V = {
            limit_offset: 0,
            limit_count: 20,
            discount: ""
        },
        F = [],
        H = {},
        D = "",
        R = !1; !
        function() {
            var t = P.a.filter.$children[0].params.bizcircleMap,
            e = P.a.filter.$children[0].params.districtMap;
            t = JSON.parse(JSON.stringify(t));
            for (var i in t) t.hasOwnProperty(i) && (H[i] = t[i]);
            e = JSON.parse(JSON.stringify(e));
            for (var i in e) e.hasOwnProperty(i) && (H[i] = e[i])
        } (),
        H.shanghaizhoubian = {},
        H.shanghaizhoubian.pointLng = 121.003065,
        H.shanghaizhoubian.pointLat = 31.162445,
        H.fengxian = {},
        H.fengxian.pointLng = 121.568516,
        H.fengxian.pointLat = 30.863183,
        H.chongming = {},
        H.chongming.pointLng = 121.525602,
        H.chongming.pointLat = 31.588796;
        var W, U = 0,
        J = {},
        Z = !1,
        G = 1,
        q = !0,
        K = !1,
        Q = {
            zoomLevel1: [10, 11, 12, 13],
            zoomLevel2: [14],
            zoomLevel3: [15, 16, 17, 18],
            city: headerParameters.cityName,
            sortParams: ["def", "p", "date"],
            filters: ["district", "bizcircle", "search", "metro", "price"],
            multiFilters: ["pro", "room", "fea", "sta", "cycle", "ft"],
            districts: ["上海周边", "青浦", "松江", "金山", "嘉定", "普陀", "长宁", "闵行", "奉贤", "徐汇", "静安", "闸北", "宝山", "虹口", "黄浦", "杨浦", "浦东"]
        },
        X = new Vue({
            el: "body",
            data: {
                data: T,
                selectedBlock: null,
                params: [],
                uid: 0,
                discount: V.discount,
                metro: J.show,
                metroLabel: !1,
                mapLoading: !1
            },
            watch: {
                params: function(t) {
                    z()
                }
            },
            created: function() {
                var t = this;
                $.ajax({
                    url: headerParameters.uchost + "/login/getLoginUserInfo.json?ref=" + window.location.href,
                    dataType: "jsonp",
                    jsonp: "callback",
                    success: function(e, i, n) {
                        1 == e.code && ($(".no-login").hide(), $(".logged").show(), $(".logged .user-name").text(e.data.userName)),
                        t.uid = e.data.uid,
                        headerParameters.loginUserInfo = e.data,
                        V.client = "pc",
                        C("blockId") && l({
                            newblock_id: C("blockId")
                        }),
                        C("blockName") && l({
                            search: decodeURI(escape(C("blockName"))),
                            fromUrl: !0
                        })
                    },
                    error: function(t, e) {
                        console.log(e)
                    }
                })
            },
            methods: {
                highlightLabel: function(t) {},
                setHover: function(t, e) {
                    Vue.set(this.data.dataList[t], "hover", e)
                },
                setSelectedHover: function(t) {
                    this.selectedBlock && Vue.set(this.selectedBlock, "hover", t)
                },
                submitFavor: function(t) {
                    var e = n("lianjia_token");
                    if (!e) return $(".btn-login").click(),
                    !1;
                    $.ajax({
                        headers: {
                            Accept: "application/json",
                            "Content-Type": "application/json"
                        },
                        url: window.location.protocol + "//xfapi.dooioo." + window.headerParameters.suffix + "/api/v1/favorite/" + t,
                        type: "post",
                        data: JSON.stringify({
                            sh_access_token: e,
                            client: "pc"
                        })
                    })
                },
                favorIt: function(t, e) {
                    if (window.ga("send", "event", "button", "click", "favor"), !this.uid) return $(".btn-login").click(),
                    !1;
                    var i = !this.data.dataList[e].isFavorite;
                    this.data.dataList[e].isFavorite = i,
                    this.submitFavor(this.data.dataList[e].id, i)
                },
                favorSelected: function() {
                    if (!this.uid) return $(".btn-login").click(),
                    !1;
                    var t = !this.selectedBlock.isFavorite;
                    this.selectedBlock.isFavorite = t,
                    this.submitFavor(this.selectedBlock.id, t)
                },
                getPrice: g,
                removeCondition: function(t) {
                    var e = this.params;
                    if ("all" == t) return X.params.splice(0, X.params.length),
                    F = [],
                    X.discount = "",
                    V.discount = "",
                    void P.a.filter.$children[0].clearFilter(t);
                    P.a.filter.$children[0].clearFilter(t),
                    delete V.newblock_id,
                    $.each(e,
                    function(i, n) {
                        if (n.key == t.key && n.value == t.value) return e.splice(i, 1),
                        !1
                    })
                },
                toggleDiscount: function() {
                    this.discount = !this.discount,
                    this.discount ? V.discount = 1 : V.discount = "",
                    V.limit_offset = 0,
                    l(V)
                },
                toggleMetro: function() {
                    this.metroLabel = !this.metroLabel,
                    this.metroLabel ? $(".metro-station").show() : $(".metro-station").hide()
                }
            }
        });
        Vue.filter("area-format",
        function(t) {
            if (t) return t.minArea && t.maxArea ? t.minArea == t.maxArea ? t.minArea + "m²": t.minArea + "-" + t.maxArea + "m²": t.minArea ? t.minArea + "m²": t.maxArea ? t.maxArea + "m²": "面积暂无"
        }),
        Vue.filter("room-format",
        function(t) {
            if (t) return t.rooms ? t.rooms: "户型暂无"
        });
        var Y = new BMap.ScaleControl({
            anchor: BMAP_ANCHOR_BOTTOM_RIGHT
        }),
        tt = new BMap.NavigationControl({
            anchor: BMAP_ANCHOR_BOTTOM_RIGHT,
            type: BMAP_NAVIGATION_CONTROL_ZOOM
        });
        P.a.filter.$children[0].initFilter(),
        function() {
            k(),
            W = new BMap.BusLineSearch(O, {
                renderOptions: {
                    map: O
                },
                onGetBusListComplete: function(t) {
                    if (t) {
                        var e = t.getBusListItem(0);
                        W.getBusLine(e)
                    }
                },
                onMarkersSet: function(t) {
                    $.each(t,
                    function(t, e) {
                        var i = {
                            html: "",
                            anchor: ""
                        },
                        n = new BMap.Point(e.point.lng, e.point.lat);
                        i.html = '<div class="metro-station"><p>' + e.getTitle() + "</p></div>",
                        i.anchor = new BMap.Size( - 30, -25);
                        var o = new BMapLib.RichMarker(i.html, n, {
                            anchor: i.anchor,
                            background: "transparent"
                        });
                        O.addOverlay(o),
                        $(o._container).css("background", "transparent"),
                        $(e.V).hover(function() {
                            X.metroLabel || $(o._container).find(".metro-station").show()
                        },
                        function() {
                            X.metroLabel || $(o._container).find(".metro-station").hide()
                        })
                    }),
                    X.metroLabel && $(".metro-station").show()
                }
            }),
            W.enableAutoViewport(),
            O.addEventListener("zoomstart",
            function() {
                G = x(),
                $(".search-input").blur()
            }),
            O.addEventListener("click",
            function() {
                $(".search-input").blur()
            }),
            O.addEventListener("movestart",
            function() {
                $(".search-input").blur()
            }),
            O.addEventListener("moveend",
            function() {
                1 != x() && W.disableAutoViewport(),
                1 == x() || !q || V.search || V.newblock_id || l($.extend(V, o())),
                q = !0
            }),
            O.addEventListener("zoomend",
            function(t, e) {
                1 != x() && (W.disableAutoViewport(), $.extend(V, o())),
                !q || V.search || V.newblock_id || (1 != x() ? l($.extend(V, o())) : 1 != G && (V = u(V), $(".item-wrap").scrollTop(0), $.extend(V, {
                    limit_offset: 0,
                    limit_count: 20
                }), l(V)))
            })
        } (),
        c.prototype = new BMap.Overlay,
        c.prototype.initialize = function(t) {
            this._map = t;
            var e = this._dom[0];
            return e.style.position = "absolute",
            t.getPanes().markerPane.appendChild(e),
            this._div = e,
            e
        },
        c.prototype.draw = function() {
            var t = this._map.pointToOverlayPixel(this._center);
            this._div.style.left = t.x - $(this._div).width() / 2 + "px",
            this._div.style.top = t.y - $(this._div).height() / 2 + "px"
        },
        c.prototype.show = function() {
            this._div && (this._div.style.display = "")
        },
        c.prototype.hide = function() {
            this._div && (this._div.style.display = "none")
        },
        c.prototype.addEventListener = function(t, e) {
            $(this._div).on(t, e)
        };
        var et = 0;
        $(".item-wrap").scroll(function() {
            L()
        }),
        $(".expander").click(function() {
            S ? ($(".list-container").animate({
                right: "-380px"
            },
            "normal", "swing",
            function() {
                $(".list-container").css({
                    width: 0,
                    right: "0",
                    overflow: "hidden"
                }),
                $(".collaped-list").show()
            }), $("#map-container").animate({
                "margin-right": "0"
            },
            function() {
                V.metro || 1 == x() || l(o())
            }), $(".conditions-container").css("margin-right", 0), $(".map-conditions").animate({
                "margin-right": "15px"
            }), $(".map-loading").animate({
                right: "0"
            }), X.selectedBlock = null) : ($(".list-container").css({
                right: "-380px",
                width: "380px",
                overflow: "inherit"
            }), $(".collaped-list").hide(), $("#map-container").animate({
                "margin-right": "380px"
            },
            function() {}), $(".list-container").animate({
                right: "0"
            },
            function() {}), $(".conditions-container").css("margin-right", "380px"), $(".map-conditions").animate({
                "margin-right": "395px"
            }), $(".map-loading").animate({
                right: "380px"
            })),
            S = !S,
            z()
        }),
        $(".list-header").on("click", ".sort", {},
        function() {
            var t, e = $(this).find("i");
            e.hasClass("price-sort") && ($(this).hasClass("on") ? e.hasClass("up") ? (e.removeClass("up"), e.addClass("down"), t = {
                p: "2",
                sort: !0
            }) : e.hasClass("down") && (e.removeClass("down"), e.addClass("up"), t = {
                p: "1",
                sort: !0
            }) : ($(".list-header .sort").removeClass("on"), $(this).addClass("on"), t = e.hasClass("up") ? {
                p: "1",
                sort: !0
            }: {
                p: "2",
                sort: !0
            })),
            e.hasClass("time-sort") && ($(this).hasClass("on") ? e.hasClass("up") ? (e.removeClass("up"), e.addClass("down"), t = {
                date: "2",
                sort: !0
            }) : e.hasClass("down") && (e.removeClass("down"), e.addClass("up"), t = {
                date: "1",
                sort: !0
            }) : ($(".list-header .sort").removeClass("on"), $(this).addClass("on"), t = e.hasClass("up") ? {
                date: "1",
                sort: !0
            }: {
                date: "2",
                sort: !0
            })),
            $(this).text().indexOf("默认") > -1 && ($(".list-header .sort").removeClass("on"), $(this).addClass("on"), t = {
                def: "1",
                sort: !0
            }),
            1 == x() && (t.limit_count = 20, t.limit_offset = 0),
            $(".item-wrap").scrollTop(0),
            l($.extend(v(V, t), t))
        }),
        $(".item-wrap").on("mouseover", ".list-item", {},
        function() {
            var t = $(this).data("id");
            $("#map-container [data-id=" + t + "]").addClass("hover"),
            $("#map-container [data-id=" + t + "]").parent().css("z-index", 0)
        }),
        $(".item-wrap").on("mouseout", ".list-item", {},
        function() {
            var t = $(this).data("id"),
            e = $("#map-container [data-id=" + t + "]").parent();
            $("#map-container [data-id=" + t + "]").removeClass("hover"),
            e.css("z-index", e.attr("zindex"))
        }),
        $(".item-wrap").on("click", ".list-item", {},
        function() {
            window.open($(this).find(".title a").attr("href"))
        }),
        $(".list-item-selected").click(function() {
            window.open($(this).find(".title a").attr("href"))
        }),
        $("div.switch-box").hover(function() {
            $("div.switch-drop").show()
        },
        function() {
            $("div.switch-drop").hide()
        }),
        $(".go-to-list").click(function() {
            var t = "/loupan/",
            e = ["metro", "price"],
            i = ["room", "pro", "sta", "cycle", "ft"];
            V.bizcircle ? t += V.bizcircle + "/": V.district && (t += V.district + "/"),
            e.forEach(function(e) {
                V[e] && (t += e + V[e])
            }),
            i.forEach(function(e) {
                V[e] && V[e].split(",").forEach(function(i) {
                    t += e + i
                })
            }),
            $(this).attr("href", t)
        }),
        function(t, e, i, n, o, a, r) {
            t.GoogleAnalyticsObject = o,
            t[o] = t[o] ||
            function() { (t[o].q = t[o].q || []).push(arguments)
            },
            t[o].l = 1 * new Date,
            a = e.createElement(i),
            r = e.getElementsByTagName(i)[0],
            a.async = 1,
            a.src = "//www.google-analytics.com/analytics.js",
            r.parentNode.insertBefore(a, r)
        } (window, document, "script", 0, "ga");
        var it = {
            sh: "UA-75804455-1",
            su: "UA-80573743-1"
        };
        ga("create", it[headerParameters.cityCode], "auto"),
        ga("send", "pageview"),
        $("html").on("click", "[data-dianji]",
        function() {
            var t = $(this).data("dianji");
            ga("send", "event", "button", "click", t)
        });
        var nt = nt || [];
        window._vds = nt,
        function() {
            nt.push(["setAccountId", "970bc0baee7301fa"]),
            function() {
                var t = document.createElement("script");
                t.type = "text/javascript",
                t.async = !0,
                t.src = ("https:" == document.location.protocol ? "https://": "http://") + "dn-growing.qbox.me/vds.js";
                var e = document.getElementsByTagName("script")[0];
                e.parentNode.insertBefore(t, e)
            } ()
        } (),
        window._pt_sp_2 = [],
        _pt_sp_2.push("setAccount,393d1d99");
        var ot = "https:" == document.location.protocol ? " https://": " http://"; !
        function() {
            var t = document.createElement("script");
            t.type = "text/javascript",
            t.async = !0,
            t.src = ot + "js.ptengine.cn/js/pta.js";
            var e = document.createElement("script");
            e.type = "text/javascript",
            e.async = !0,
            e.src = ot + "js.ptengine.cn/js/pts.js";
            var i = document.getElementsByTagName("script")[0];
            i.parentNode.insertBefore(t, i),
            i.parentNode.insertBefore(e, i)
        } ()
    },
    83 : function(t, e, i) {
        "use strict";
        var n = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ?
        function(t) {
            return typeof t
        }: function(t) {
            return t && "function" == typeof Symbol && t.constructor === Symbol && t !== Symbol.prototype ? "symbol": typeof t
        };
        Object.assign = Object.assign ||
        function(t, e) {
            Object.keys(e).forEach(function(i) {
                t[i] = e[i]
            })
        };
        var o, a = function() {
            return {
                search: null,
                district: null,
                bizcircle: null,
                metro: null,
                price: null,
                sta: [],
                ft: [],
                room: [],
                pro: [],
                cycle: [],
                operation: null
            }
        },
        r = {
            condition: a()
        },
        s = {
            setCondition: function(t, e) {
                switch (e.key) {
                case "district":
                    Object.assign(t.condition, {
                        metro: null,
                        district: e.district,
                        bizcircle: null,
                        search: null
                    });
                    break;
                case "bizcircle":
                    Object.assign(t.condition, {
                        metro: null,
                        district: e.district,
                        bizcircle: e.bizcircle,
                        search: null
                    });
                    break;
                case "metro":
                    Object.assign(t.condition, {
                        district: null,
                        bizcircle: null,
                        search: null,
                        metro: e.metro
                    });
                    break;
                case "search":
                    Object.assign(t.condition, {
                        metro: null,
                        district: null,
                        bizcircle: null,
                        room: [],
                        price: null,
                        pro: [],
                        sta: [],
                        ft: [],
                        cycle: [],
                        search: e
                    });
                    break;
                case "price":
                    t.condition.price = e.value ? e: null;
                    break;
                default:
                    if (e.value) {
                        for (var i = 0,
                        n = t.condition[e.key].length; i < n; i++) if (t.condition[e.key][i].value === e.value) {
                            t.condition[e.key].splice(i, 1);
                            break
                        }
                        i == n && t.condition[e.key].push(e)
                    } else t.condition[e.key] = []
                }
                t.condition.operation = e.key,
                setTimeout(function() {
                    o(t.condition)
                },
                400)
            },
            clearCondition: function(t, e) {
                if ("all" === e) t.condition = a(),
                t.condition.operation = "clear";
                else if (t.condition[e.key] && t.condition[e.key].length) {
                    for (var i = 0,
                    n = t.condition[e.key].length; i < n; i++) if (t.condition[e.key][i].value === e.value) {
                        t.condition[e.key].splice(i, 1);
                        break
                    }
                } else "district" === e.key && (t.condition.district = null, t.condition.bizcircle = null),
                t.condition[e.key] = null;
                o(t.condition)
            },
            initCondition: function(t, e) {
                Object.assign(t.condition, e),
                t.condition.operation = "init",
                o(t.condition)
            }
        },
        c = new Vuex.Store({
            state: r,
            mutations: s,
            strict: !0
        }),
        l = {
            methods: {
                activate: function() {
                    this.show = !0,
                    this.entering = !0
                },
                activated: function() {
                    this.showing = !0
                },
                deActivateDelay: function() {
                    var t = this;
                    this.entering = !1,
                    setTimeout(function() {
                        t.showing || (t.show = !1)
                    },
                    200)
                },
                deActivateImmediate: function() {
                    var t = this;
                    this.showing = !1,
                    setTimeout(function() {
                        t.entering || (t.show = !1)
                    },
                    200)
                }
            }
        },
        d = Vue.extend({
            template: "#filterBox",
            props: ["items", "field", "name", "multiple"],
            mixins: [l],
            data: function() {
                return {
                    show: !1,
                    showing: !1,
                    entering: !1
                }
            },
            computed: {
                active: function() {
                    return this.show ? "expand": this.selected.length ? "active": ""
                },
                filtered: function() {
                    var t = this.$store.state.condition[this.field];
                    return this.selected.length ? 1 == this.selected.length ? t.length ? t[0].text: t.text: "多选": this.name
                },
                selected: function() {
                    var t = [];
                    return this.multiple ? this.$store.state.condition[this.field].forEach(function(e) {
                        t.push(e.value)
                    }) : t = this.$store.state.condition[this.field] ? [this.$store.state.condition[this.field].value] : [],
                    t
                }
            },
            methods: {
                isSelected: function(t) {
                    return this.selected.indexOf(t) > -1 ? "selected": ""
                },
                setParam: function(t) {
                    var e = {
                        text: t ? t.text: null,
                        key: this.field,
                        value: t ? t.value: null
                    };
                    this.multiple && t || this.deActivateImmediate(),
                    this.$store.commit("setCondition", e)
                }
            }
        }),
        h = Vue.extend({
            template: "#regionBox",
            props: ["items", "field", "name", "disAndBiz"],
            data: function() {
                return {
                    show_first: !1,
                    showing_first: !1,
                    show_second: !1,
                    entering_field: !1,
                    show_third: !1,
                    hoveredItem: null,
                    bizcircleList: [],
                    tempDistrict: null
                }
            },
            computed: {
                active: function() {
                    return this.show_first ? "expand": this.filtered !== this.name ? "active": ""
                },
                filtered: function() {
                    var t = this.$store.state.condition;
                    return t.bizcircle ? t.bizcircle.text: t.district ? t.district.text: t.metro ? t.metro.text: this.name
                }
            },
            methods: {
                city: function() {
                    return [headerParameters.cityCode]
                },
                fieldIsSelected: function(t) {
                    return this.hoveredItem ? this.hoveredItem.field === t ? "selected": "": this.hoveredItem === t ? "selected": ""
                },
                itemIsSelected: function(t) {
                    var e = this.$store.state.condition[this.hoveredItem.field];
                    return "district" === this.hoveredItem.field && this.tempDistrict && this.tempDistrict.value === t ? "hovered": e && e.value === t ? "selected": ""
                },
                bizcircleIsSelected: function(t) {
                    var e = this.$store.state.condition.bizcircle;
                    return e ? e.value === t ? "selected": "": t === e ? "selected": ""
                },
                showFirst: function() {
                    this.show_first = !0,
                    this.entering_field = !0
                },
                hideFirst: function() {
                    var t = this;
                    this.entering_field = !1,
                    this.tempDistrict = null,
                    setTimeout(function() {
                        t.showing_first || (t.show_first = !1, t.show_second = !1, t.show_third = !1)
                    },
                    200)
                },
                shownFirst: function() {
                    this.showing_first = !0
                },
                hidenFirst: function() {
                    var t = this;
                    this.showing_first = !1,
                    this.tempDistrict = null,
                    setTimeout(function() {
                        t.entering_field || (t.show_first = !1, t.show_second = !1, t.show_third = !1)
                    },
                    200)
                },
                showSecond: function(t) {
                    if (!t) return this.show_third = !1,
                    void(this.show_second = !1);
                    "metro" === t.field && (this.show_third = !1),
                    this.hoveredItem = t,
                    this.show_second = !0
                },
                hideSecond: function() {
                    this.show_second = !1
                },
                showThird: function(t) {
                    t && "metro" !== t.key ? (this.tempDistrict = t, this.bizcircleList = this.disAndBiz[t.value], this.show_third = !0) : this.show_third = !1
                },
                hideThird: function() {
                    this.show_second = !1
                },
                clearParam: function() {
                    this.hidenFirst(),
                    this.$store.commit("setCondition", {
                        text: null,
                        key: "metro",
                        value: null
                    })
                },
                setParam: function(t) {
                    var e = this.tempDistrict,
                    i = {
                        text: t ? t.text: null,
                        value: t ? t.value: null,
                        key: t ? t.key: null
                    },
                    n = {
                        district: {
                            text: e ? e.text: null,
                            key: e ? e.key: null,
                            value: e ? e.value: null
                        },
                        metro: t ? i: null,
                        bizcircle: t ? i: null,
                        key: t ? t.key: "bizcircle"
                    };
                    this.hidenFirst(),
                    this.$store.commit("setCondition", n)
                }
            }
        }),
        u = Vue.extend({
            template: "#search",
            data: function() {
                return {
                    think_list: [],
                    hot_list: [],
                    searching: !1,
                    selected_index: -1,
                    search: ""
                }
            },
            watch: {
                searchState: function(t, e) {
                    t || (this.search = "")
                }
            },
            computed: {
                show_hot: function() {
                    return this.searching && !this.search && !this.think_list.length
                },
                show_suggestion: function() {
                    return this.searching && this.search && this.think_list.length
                },
                searchState: function() {
                    return this.$store.state.condition.search
                }
            },
            created: function() {
                var t = this;
                $.getJSON(window.location.protocol + "//xfapi.dooioo." + window.headerParameters.suffix + "/api/v1/hotsearch?cityCode=" + window.headerParameters.cityCode, {},
                function(e) {
                    t.hot_list = e.dataList
                })
            },
            methods: {
                focus: function() {
                    this.searching = !0
                },
                blur: function() {
                    var t = this;
                    setTimeout(function() {
                        t.searching = !1
                    },
                    250)
                },
                highLight: function(t) {
                    return t == this.selected_index ? ["hover"] : [""]
                },
                setKeyword: function(t) {
                    var e, i;
                    t && "object" === (void 0 === t ? "undefined": n(t)) && (i = t, e = t.nameShow, this.search = t.nameShow),
                    t && "string" == typeof t && (i = t, e = t, this.search = t),
                    null === t && (i = this.search.trim(), e = this.search.trim()),
                    this.searching = !1,
                    i && this.$store.commit("setCondition", {
                        key: "search",
                        value: i,
                        text: e
                    })
                },
                keyUp: function(t) {
                    var e = t.keyCode,
                    i = this.show_hot ? this.hot_list: this.think_list;
                    switch (e) {
                    case 13:
                        -1 == this.selected_index ? this.setKeyword(null) : this.setKeyword(this.show_hot ? i[this.selected_index].showName: i[this.selected_index]),
                        this.selected_index = -1;
                        break;
                    case 38:
                        t.preventDefault(),
                        this.selected_index = (this.selected_index - 1 + i.length) % i.length;
                        break;
                    case 40:
                        t.preventDefault(),
                        this.selected_index = (this.selected_index + 1) % i.length;
                        break;
                    default:
                        this.selected_index = -1,
                        this.getThinkList(t.target.value)
                    }
                },
                keyDown: function(t) {
                    38 != t.keyCode && 40 != t.keyCode || t.preventDefault()
                },
                getThinkList: function(t) {
                    var e = t || this.search,
                    i = this;
                    e ? $.getJSON("/search/" + e, null,
                    function(t) {
                        t.data.forEach(function(t) {
                            "住宅" != t.villaName && "商业" != t.villaName || !t.price || 0 == t.price || (t.price_description = '均价<span class="red">' + t.price + "</span>元/平"),
                            "住宅" != t.villaName && "商业" != t.villaName || t.price && 0 != t.price || (t.price_description = "均价待定"),
                            "别墅" == t.villaName && t.price && 0 != t.price && (t.price_description = '总价<span class="red"> ' + t.price + "</span>万起"),
                            "别墅" != t.villaName || t.price && 0 != t.price || (t.price_description = "总价待定")
                        }),
                        i.think_list = t.data
                    }) : this.think_list = []
                }
            }
        }),
        p = Vue.extend({
            template: "#moreBox",
            props: ["params", "name"],
            data: function() {
                return {
                    showing: !1,
                    entering: !1,
                    show: !1
                }
            },
            mixins: [l],
            computed: {
                active: function() {
                    return this.show ? "expand": this.selectedTxts.length ? "active": ""
                },
                filtered: function() {
                    return this.selectedTxts.length > 0 ? 1 === this.selectedTxts.length ? this.selectedTxts[0] : "多选": this.name
                },
                selectedTxts: function() {
                    var t = [],
                    e = this.$store.state.condition;
                    return ["pro", "sta", "cycle", "ft"].forEach(function(i) {
                        e[i].forEach(function(e) {
                            t.push(e.text)
                        })
                    }),
                    t
                }
            }
        }),
        m = Vue.extend({
            template: "#conditionRow",
            props: ["items", "field", "name"],
            data: function() {
                return {}
            },
            methods: {
                isSelected: function(t) {
                    return this.selected.indexOf(t) > -1 ? "selected": ""
                },
                setParam: function(t) {
                    var e = {
                        text: t ? t.text: null,
                        key: this.field,
                        value: t ? t.value: null
                    };
                    this.$store.commit("setCondition", e)
                }
            },
            computed: {
                selected: function() {
                    var t = [];
                    return this.$store.state.condition[this.field].forEach(function(e) {
                        t.push(e.value)
                    }),
                    t
                }
            }
        }),
        f = Vue.extend({
            template: "#filter",
            store: c,
            data: function() {
                return {
                    params: null
                }
            },
            created: function() {
                var t = this;
                $.ajax({
                    url: "/loupan/ajax/list/conditions?use=map",
                    type: "get",
                    async: !1,
                    dataType: "json",
                    success: function(e) {
                        var i = e;
                        i.region = [{
                            text: "区域",
                            field: "district",
                            data: e.district
                        },
                        {
                            text: "地铁",
                            field: "metro",
                            data: e.metro
                        }],
                        t.params = i
                    }
                })
            },
            methods: {
                clearFilter: function(t) {
                    this.$store.commit("clearCondition", t)
                },
                initFilter: function() {
                    var t = {},
                    e = this,
                    i = window.location.search.slice(1),
                    n = {};
                    try {
                        i && (n = JSON.parse(decodeURI(i)))
                    } catch(t) {}
                    Object.keys(n).forEach(function(i) {
                        $.isArray(n[i]) ? t[i] = e.params[i].filter(function(t) {
                            return n[i].indexOf(t.value) > -1
                        }) : "bizcircle" === i ? t.bizcircle = e.params.disAndBiz[n.district].filter(function(t) {
                            return n[i] === t.value
                        })[0] : t[i] = e.params[i].filter(function(t) {
                            return n[i] === t.value
                        })[0]
                    }),
                    this.$store.commit("initCondition", t)
                }
            }
        });
        Vue.component("filter", f),
        Vue.component("filter-box", d),
        Vue.component("region-box", h),
        Vue.component("more-box", p),
        Vue.component("condition-row", m),
        Vue.component("search", u);
        var v = new Vue({
            el: "#header"
        }),
        f = {
            filter: v,
            initCallback: function(t) {
                o = t
            }
        };
        e.a = f
    }
});
//# sourceMappingURL=map.min.js.map
